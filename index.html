<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>SPAMTEST | COMMAND CONSOLE v7</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        :root {
            --neon-green: #00ff41;
            --dark-red: #8b0000;
            --alert-red: #ff3131;
            --bg-black: #0d0d0d;
            --panel-bg: #1a1a1a;
        }

        body {
            background-color: var(--bg-black);
            color: var(--neon-green);
            font-family: 'Segoe UI', 'Courier New', monospace;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar Controllo */
        .sidebar {
            width: 450px;
            background: var(--panel-bg);
            border-right: 2px solid #333;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-shadow: 10px 0 20px rgba(0,0,0,0.5);
        }

        h1 {
            font-size: 1.5em;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin: 0;
            color: #fff;
            border-left: 5px solid var(--neon-green);
            padding-left: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-size: 0.8em;
            text-transform: uppercase;
            color: #888;
        }

        input, textarea {
            background: #000;
            border: 1px solid #444;
            color: var(--neon-green);
            padding: 12px;
            border-radius: 4px;
            font-family: monospace;
        }

        input:focus, textarea:focus {
            border-color: var(--neon-green);
            outline: none;
        }

        .btn {
            padding: 15px;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .btn-start {
            background: var(--neon-green);
            color: #000;
        }

        .btn-start:hover {
            box-shadow: 0 0 20px var(--neon-green);
            background: #fff;
        }

        .btn-stop {
            background: var(--dark-red);
            color: #fff;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.7em;
            background: #333;
            display: inline-block;
        }

        /* Monitor Log */
        .main-content {
            flex-grow: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
        }

        #monitor {
            flex-grow: 1;
            background: #000;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            font-size: 0.85em;
            line-height: 1.6;
            display: flex;
            flex-direction: column-reverse;
        }

        .log-entry {
            border-bottom: 1px solid #1a1a1a;
            padding: 5px 0;
            animation: fadeIn 0.3s ease-out;
        }

        .log-time { color: #555; margin-right: 10px; }
        .log-info { color: var(--neon-green); }
        .log-success { color: #fff; background: #004d00; padding: 2px 5px; border-radius: 3px; }
        .log-error { color: var(--alert-red); }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h1>System Alpha</h1>
    <div id="statusIndicator" class="status-badge">STANDBY</div>

    <div class="input-group">
        <label>Private Key (RAM Only)</label>
        <input type="password" id="privKey" placeholder="0x...">
    </div>

    <div class="input-group">
        <label>Target Acquired</label>
        <textarea id="targetList" rows="8" placeholder="Scansione automatica o inserimento manuale..."></textarea>
    </div>

    <div class="input-group">
        <label>Frequenza Blast (secondi)</label>
        <input type="number" id="freq" value="60">
    </div>

    <button id="actionBtn" class="btn btn-start" onclick="toggleBot()">Avvia Protocollo</button>
    
    <div style="margin-top: auto; font-size: 0.7em; color: #444;">
        FACTORY: 0x70c43bf1e1ae424c2f6cfe8df57ffc931462270f<br>
        OWNER: 0xa036B32c86E2aB7F2AdE9ACC15984B2A2DDe8977
    </div>
</div>

<div class="main-content">
    <div id="monitor">
        <div class="log-entry"><span class="log-info">Console inizializzata. In attesa di autorizzazione...</span></div>
    </div>
</div>

<script>
    const FACTORY_ADDR = "0x70c43bf1e1ae424c2f6cfe8df57ffc931462270f";
    const ABI = ["function launchBlast(address[] memory targets, uint256 amount) external"];
    const RPC_URL = "https://paseo.rpc.amforc.com";
    
    let botActive = false;
    let wallet, factoryContract, provider;

    function addLog(msg, type = 'info') {
        const monitor = document.getElementById('monitor');
        const now = new Date().toLocaleTimeString();
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        
        let content = `<span class="log-time">[${now}]</span>`;
        if(type === 'success') content += `<span class="log-success">${msg}</span>`;
        else if(type === 'error') content += `<span class="log-error">!! ${msg}</span>`;
        else content += `<span class="log-info">> ${msg}</span>`;
        
        entry.innerHTML = content;
        monitor.prepend(entry);
    }

    async function toggleBot() {
        const key = document.getElementById('privKey').value;
        const btn = document.getElementById('actionBtn');
        const status = document.getElementById('statusIndicator');

        if (!botActive) {
            if (!key.startsWith('0x') || key.length < 64) {
                addLog("Chiave privata non valida", "error");
                return;
            }

            try {
                provider = new ethers.JsonRpcProvider(RPC_URL);
                wallet = new ethers.Wallet(key, provider);
                factoryContract = new ethers.Contract(FACTORY_ADDR, ABI, wallet);
                
                botActive = true;
                btn.innerText = "Arresta Protocollo";
                btn.className = "btn btn-stop";
                status.innerText = "ACTIVE";
                status.style.background = var(--dark-red);
                
                addLog(`Bot collegato: ${wallet.address}`);
                runCycle();
            } catch (e) {
                addLog("Errore connessione: " + e.message, "error");
            }
        } else {
            botActive = false;
            btn.innerText = "Avvia Protocollo";
            btn.className = "btn btn-start";
            status.innerText = "STANDBY";
            status.style.background = "#333";
            addLog("Protocollo terminato dall'utente.");
        }
    }

    async function scrapeTargets() {
        addLog("Scansione rete in corso...");
        // Simulazione scraping veloce
        let t = [];
        for(let i=0; i<12; i++) t.push(ethers.Wallet.createRandom().address);
        document.getElementById('targetList').value = t.join("\n");
        return t;
    }

    async function runCycle() {
        if (!botActive) return;

        const targets = await scrapeTargets();
        const freq = document.getElementById('freq').value * 1000;

        try {
            addLog(`Esecuzione Blast su ${targets.length} targets...`);
            const tx = await factoryContract.launchBlast(targets, 1000000, { gasLimit: 2000000 });
            addLog(`TX Inviata: ${tx.hash.substring(0,25)}...`, "success");
            
            await tx.wait();
            addLog("Conferma ricevuta. Contratti creati correttamente.", "success");
        } catch (e) {
            addLog("Errore Blast: " + (e.reason || e.message), "error");
        }

        if (botActive) {
            addLog(`Prossimo ciclo tra ${freq/1000} secondi...`);
            setTimeout(runCycle, freq);
        }
    }
</script>
</body>
</html>
